# نظام مشاهدة الإعلانات - AMG Real Estate

## الميزات المُضافة:

### 🔍 **نظام تسجيل المشاهدات**
- تسجيل تلقائي لمشاهدة العقار عند فتح صفحة التفاصيل
- عرض عدد المشاهدات في كارت العقار
- حفظ IP Address و User Agent للمشاهدات
- تسجيل النشاط للمستخدمين المسجلين

### 📊 **عرض الإحصائيات**
- عدد المشاهدات في كارت العقار
- إحصائيات شاملة في صفحة التفاصيل:
  - عدد المشاهدات
  - عدد المفضلة
  - عدد الاستفسارات

### 🏠 **صفحة تفاصيل تفاعلية**
- **معرض صور متطور** مع:
  - تنقل بين الصور
  - مؤشرات الصور
  - تكبير الصور (Lightbox)
  - صور مصغرة
  
- **معلومات شاملة** تشمل:
  - تفاصيل العقار الكاملة
  - المواصفات والمميزات
  - معلومات المالك
  - الموقع على الخريطة (جاهز للإضافة)

### ❤️ **نظام المفضلة**
- إضافة/إزالة العقارات من المفضلة
- عرض حالة المفضلة للمستخدمين المسجلين
- تسجيل الأنشطة عند إضافة/إزالة المفضلة

### 💬 **نظام الاستفسارات**
- نموذج استفسار تفاعلي
- إرسال استفسارات مع/بدون تسجيل دخول
- ربط الاستفسارات بالعقارات
- تسجيل الأنشطة للاستفسارات

### 📱 **ميزات تفاعلية**
- **مشاركة العقار** عبر:
  - Web Share API (للهواتف)
  - نسخ الرابط للمتصفحات
- **معلومات التواصل** قابلة للطي/التوسيع
- **تصميم متجاوب** لجميع الأجهزة
- **إشعارات** للمستخدم عند التفاعل

### 🔗 **API Endpoints الجديدة**

#### `/api/properties/[id]/view` (POST/GET)
- تسجيل مشاهدة العقار
- جلب إحصائيات المشاهدة

#### `/api/properties/[id]/public` (GET)
- جلب بيانات العقار للعرض العام
- لا يتطلب تسجيل دخول

#### `/api/properties/[id]/favorite` (POST/DELETE/GET)
- إدارة المفضلة
- إضافة وإزالة العقارات من المفضلة

#### `/api/inquiries` (POST/GET)
- إرسال الاستفسارات
- جلب استفسارات المستخدم

### 🛠 **التحسينات التقنية**
- **تسجيل الأنشطة** للمستخدمين المسجلين
- **معالجة الأخطاء** المحسنة
- **إدارة الحالة** للمكونات التفاعلية
- **تحسين الأداء** مع lazy loading للصور
- **أمان محسن** مع التحقق من البيانات

### 📍 **المسار الجديد**
```
/properties/[id] - صفحة تفاصيل العقار التفاعلية
```

### 🔄 **التحديثات على المكونات الموجودة**
- **PropertyCard**: إضافة عرض المشاهدات وتحديث زر التفاصيل
- **Types**: إضافة خاصية `views` لنوع Property
- **UI Components**: تحسينات وإضافات للمكونات التفاعلية

---

## 🚀 **كيفية الاستخدام:**

1. **عرض العقارات**: ستظهر عدد المشاهدات في كل كارت عقار
2. **فتح التفاصيل**: اضغط على "تفاصيل أكثر" لفتح الصفحة التفاعلية
3. **التفاعل**: 
   - أضف للمفضلة ❤️
   - شارك العقار 📤
   - أرسل استفسار 💬
   - اتصل مباشرة 📞

## 📈 **الإحصائيات المتاحة:**
- عدد المشاهدات في الوقت الفعلي
- عدد الإضافات للمفضلة
- عدد الاستفسارات المرسلة
- معلومات المالك والتفاعل معه

تم تطوير النظام بالكامل ليكون قابل للتوسع ومتوافق مع معايير الأمان والأداء العالية.